<html>
    <head>
        <meta charset="utf-8">
        <title>101</title>
        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>
          <script src="https://cdn.jsdelivr.net/npm/web3@1.0.0-beta.33/src/index.min.js"></script>
    </head>
    <body>
        <div id="form">
            <p>Введите сообщение:</p>
            <input type="text" id="message" value="ok">
            <p>Введите public блока:</p>
            <input type="text" id="public_block" value="00d6cee17c766360c9d9721c8a950b3f4b06464da84cda3cd9987dd7f1a0ea32">
            <p>Введите public клиента:</p>
            <input type="text" id="public_client" value="00d6cee17c766360c9d9721c8a950b3f4b06464da84cda3cd9987dd7f1a0ea32">
            <p>К отправке:</p>
            <div id="encrypted"></div>
            <hr>
            <h2>Для проерки</h2>
            <p>Введите private найденного блока:</p>
            <input type="text" id="private_block" value="00d6cee17c766360c9d9721c8a950b3f4b06464da84cda3cd9987dd7f1a0ea32">
            <p>Введите private вашего контрагента:</p>
            <input type="text" id="private_client" value="00d6cee17c766360c9d9721c8a950b3f4b06464da84cda3cd9987dd7f1a0ea32">
            <p>Decrypted:</p>
            <div id="decrypted"></div>
        </div>
        <script type="text/javascript">
            $(document).ready(function(){
               $('#message, #public_block, #public_client').on('keyup change', function(){
                    var encrypted1 = encryptWithPublicKey(
                        $('#message').val(),
                        $('#public_client').val()
                    );
                    var encrypted2 = encryptWithPublicKey(
                        encrypted1,
                        $('#public_block').val()
                    );
                    
                    var decrypted2 = decryptWithPrivateKey(
                        $('#private_block').val(),
                        encrypted2
                    );
                    var decrypted1 = decryptWithPrivateKey(
                        $('#private_client').val(),
                        decrypted2
                    );
                    $('#decrypted').html(decrypted1);
               });
               $('#hash').change();
            });
        </script>
    </body>
</html>

